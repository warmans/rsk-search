<div class="container pt-4">
  <div class="w-100 d-flex flex-row align-items-center">
    <div class="card w-100 mb-4">
      <div class="card-header">
        <div class="mb-2">Obscure Media Archive</div>
      </div>
      <div class="card-body pb-0 mb-0">
        <table class="table">
          @for (item of archive; track item) {
            @for (med of item.media; track med) {
              <tr>
                <td style="width: 400px"><a [href]="'/dl/archive/file/'+med.name" target="_blank"><img style="max-width: 100%" [src]="'/dl/archive/file/'+med.thumbnailName"/></a></td>
                <td style="width: 100px;">{{ item.relatedEpisode }}</td>
                <td>{{ item.description }}</td>
              <tr>
            }
          }
        </table>
      </div>
      <div class="card-footer">
        <nav aria-label="pages">
          <ul class="pagination">
            @for (i of pages; track i) {
              <li class="page-item" [ngClass]="{'active': i === currentPage}">
                <a class="page-link"
                   [routerLink]="['/more-shite', 'archive']"
                   [queryParams]="{'page': i}"
                   [queryParamsHandling]="'merge'">{{i}}
                </a>
              </li>
            }
            @if (morePages) {
              @if (currentPage > pages.length) {
                <li class="page-item active">
                  <a class="page-link"
                     [routerLink]="['/more-shite', 'archive']"
                     [queryParams]="{'page': currentPage}"
                     [queryParamsHandling]="'merge'">{{currentPage}}
                  </a>
                </li>
              }
              <li class="page-item">
                <a [routerLink]="['/more-shite', 'archive']"
                   [queryParams]="{'page': currentPage >= maxPages ? currentPage+1 : maxPages+1}"
                   [queryParamsHandling]="'merge'" class="page-link">Next...
                </a>
              </li>
            }
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>
